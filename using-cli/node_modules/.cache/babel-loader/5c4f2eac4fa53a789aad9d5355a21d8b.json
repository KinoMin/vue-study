{"ast":null,"code":"import pubsub from 'pubsub-js';\nexport default {\n  name: 'MyItem',\n  props: ['todo'],\n  data() {\n    return {\n      flag: false\n    };\n  },\n  methods: {\n    checkTodo(id) {\n      pubsub.publish('checkTodo', id);\n    },\n    deleteTodo(id) {\n      pubsub.publish('deleteTodo', id);\n    },\n    editTodo(id) {\n      this.flag = !this.flag;\n      // nextTick: 在下一次 DOM 更新结束后执行其指定的回调。\n      this.$nextTick(function () {\n        this.$refs.inputTitle.focus();\n      });\n    },\n    // 失去焦点\n    handleBlur(todo, e) {\n      if (!todo.title.trim()) {\n        return alert('不能输入空字符');\n      }\n      this.flag = !this.flag;\n      // e.target.value: 拿输入框的值, 此时 todo.title 还是原来的值\n      pubsub.publish('updateTodo', todo.id, e.target.value);\n    }\n  }\n};","map":{"version":3,"mappings":"AAmBA;AACA;EACAA;EACAC;EACAC;IACA;MACAC;IACA;EACA;EACAC;IACAC;MACAC;IACA;IACAC;MACAD;IACA;IACAE;MACA;MACA;MACA;QACA;MACA;IACA;IACA;IACAC;MACA;QACA;MACA;MACA;MACA;MACAH;IACA;EACA;AACA","names":["name","props","data","flag","methods","checkTodo","pubsub","deleteTodo","editTodo","handleBlur"],"sourceRoot":"src/components","sources":["MyItem.vue"],"sourcesContent":["<template>\n  <li>\n    <label>\n      <input type=\"checkbox\" :checked=\"todo.done\" @change=\"checkTodo(todo.id)\"/>\n      <span v-show=\"!flag\">{{ todo.title }}</span>\n\t\t\t<input \n\t\t\t\ttype=\"text\" \n\t\t\t\t:value=\"todo.title\" \n\t\t\t\tv-show=\"flag\"\n\t\t\t\t@blur=\"handleBlur(todo,$event)\"\n\t\t\t\tref=\"inputTitle\"\n\t\t\t>\n    </label>\n    <button class=\"btn btn-danger\" @click=\"deleteTodo(todo.id)\">删除</button>\n\t\t<button v-show=\"!flag\" class=\"btn btn-edit\" @click=\"editTodo(todo.id)\">编辑</button>\n  </li>\n</template>\n\n<script>\nimport pubsub from 'pubsub-js';\nexport default {\n  name: 'MyItem',\n\tprops: ['todo'],\n\tdata () {\n\t\treturn {\n\t\t\tflag: false\n\t\t}\n\t},\n\tmethods: {\n\t\tcheckTodo(id) {\n\t\t\tpubsub.publish('checkTodo', id);\n\t\t},\n\t\tdeleteTodo(id) {\n\t\t\tpubsub.publish('deleteTodo', id);\n\t\t},\n\t\teditTodo(id) {\n\t\t\tthis.flag = !this.flag;\n\t\t\t// nextTick: 在下一次 DOM 更新结束后执行其指定的回调。\n\t\t\tthis.$nextTick(function(){\n\t\t\t\tthis.$refs.inputTitle.focus()\n\t\t\t});\n\t\t},\n\t\t// 失去焦点\n\t\thandleBlur(todo, e) {\n\t\t\tif(!todo.title.trim()) {\n\t\t\t\treturn alert('不能输入空字符');\n\t\t\t}\n\t\t\tthis.flag = !this.flag;\n\t\t\t// e.target.value: 拿输入框的值, 此时 todo.title 还是原来的值\n\t\t\tpubsub.publish('updateTodo', todo.id, e.target.value);\n\t\t}\n\t}\n}\n</script>\n\n<style scoped>\n\t/*item*/\n\tli {\n\t\tlist-style: none;\n\t\theight: 36px;\n\t\tline-height: 36px;\n\t\tpadding: 0 5px;\n\t\tborder-bottom: 1px solid #ddd;\n\t}\n\n\tli label {\n\t\tfloat: left;\n\t\tcursor: pointer;\n\t}\n\n\tli label li input {\n\t\tvertical-align: middle;\n\t\tmargin-right: 6px;\n\t\tposition: relative;\n\t\ttop: -1px;\n\t}\n\n\tli button {\n\t\tfloat: right;\n\t\tdisplay: none;\n\t\tmargin-top: 3px;\n\t}\n\n\tli:before {\n\t\tcontent: initial;\n\t}\n\n\tli:last-child {\n\t\tborder-bottom: none;\n\t}\n\n\tli:hover{\n\t\tbackground-color: #ddd;\n\t}\n\t\n\tli:hover button{\n\t\tdisplay: block;\n\t}\n</style>"]},"metadata":{},"sourceType":"module"}